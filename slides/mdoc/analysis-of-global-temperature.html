<!DOCTYPE html>
<html>
<head>
  <title>Analysis of global temperature</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
<textarea id="source">

background-image: url(img/fp-tower/website-background.svg)

class: center, middle, white

.title[Analysis of global temperature]

---
background-image: url(img/foundation/parlist-1a.svg)

# Data processing

---
background-image: url(img/foundation/parlist-1b.svg)

# Sequential iteration

---
background-image: url(img/foundation/parlist-1c.svg)

# Sequential iteration

---
background-image: url(img/foundation/parlist-1d.svg)

# Sequential iteration

---
background-image: url(img/foundation/parlist-2a.svg)

# Parallel iteration

---
background-image: url(img/foundation/parlist-2b.svg)

# Parallel iteration

---
background-image: url(img/foundation/parlist-2c.svg)

# Parallel iteration

---
background-image: url(img/foundation/parlist-2d.svg)

# Parallel iteration

---
background-image: url(img/foundation/parlist-3.svg)

# Parallel iteration

---
# Important points

.forty-seven-left[
## 1. Size the partitions appropriately
]

.forty-seven-right[
<img src="img/foundation/size-jobs.svg" alt="Find the right size for the job" style="width:400px;"/>
]


---
# Important points

<br>

## 1. Size the partitions appropriately

## 2. Benchmark and configure

--

## 3. Parallel process leads to the same result as the sequential one

---
background-image: url(img/fp-tower/website-background-white.svg)

class: middle, white

# TemperatureNotebook.scala

---
background-image: url(img/foundation/parlist-foldLeft-1.svg)

# foldLeft

---
background-image: url(img/foundation/parlist-foldLeft-2a.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2b.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2c.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2d.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2e.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2f.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2g.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2h.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-2i.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-3a.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-3b.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-3c.svg)

# foldLeft per partition

---
background-image: url(img/foundation/parlist-foldLeft-4.svg)

# All partitions folded

---
background-image: url(img/foundation/parlist-foldLeft-5a.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-5b.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-5c.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-5d.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-5e.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-5f.svg)

# foldLeft intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-6.svg)

# foldLeft

---
background-image: url(img/fp-tower/website-background-white.svg)

class: middle, white

# TemperatureExercises.scala

---
# monoFoldLeft use n + 1 default value

.sixty-two-left[
<img src="img/foundation/parlist-monofoldLeft-default.svg" alt="foldLeft per partition" style="width:600px;"/>
]

.thirty-two-right[
<img src="img/foundation/parlist-foldLeft-5a.svg" alt="foldLeft per partition" style="width:105px;"/>
]

---
# monoFoldLeft requires combine to be associative

.fifty-two-left[
<img src="img/foundation/parlist-monofoldLeft-associative-1.svg" alt="foldLeft per partition" style="width:420px;"/>
]

.forty-seven-right[
<br><br><br>
```scala
(a1 combine a2 combine a3)
(b1 combine b2 combine b3)
```
]


---
# monoFoldLeft requires combine to be associative

.fifty-two-left[
<img src="img/foundation/parlist-monofoldLeft-associative-2.svg" alt="foldLeft per partition" style="width:420px;"/>
]

.forty-seven-right[
<br><br><br>
```scala
(a1 combine a2 combine a3) combine
(b1 combine b2 combine b3)
```
]

---
# monoFoldLeft requires combine to be associative

.fifty-two-left[
<img src="img/foundation/parlist-monofoldLeft-associative-3.svg" alt="foldLeft per partition" style="width:420px;"/>
]

.forty-seven-right[
<br><br>
```scala
(a combine b combine c) combine
(d combine e combine f)
```
<br><br>
```scala
                 ==
```
<br>

```scala
(a combine b combine c combine d) combine
(e combine f)
```
]

---
background-image: url(img/foundation/parlist-foldMapPar-1a.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1b.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1c.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1d.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1e.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1f.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1g.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1h.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-1i.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2a.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2b.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2c.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2d.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2e.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2f.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2g.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2h.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2i.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-2j.svg)

# foldMap in parallel

---
background-image: url(img/foundation/parlist-foldMapPar-3a.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldMapPar-3b.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldMapPar-3c.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldMapPar-3d.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldMapPar-3e.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldMapPar-3f.svg)

# foldMap intermediate results

---
background-image: url(img/foundation/parlist-foldLeft-6.svg)

# foldMap

---
# Thread

```scala mdoc:silent
def createThread(n: Int): Thread = new Thread {
  override def run(): Unit =
    println(s"Thread ${n}")
}

val threads = 1.to(4).map(createThread)
```

```scala
threads.foreach(_.start())
// Thread 1
// Thread 3
// Thread 2
// Thread 4
```

---
# Executor and Runnable

```scala mdoc:silent
import java.util.concurrent.Executors

val fixedPool = Executors.newFixedThreadPool(2)

def createRunnable(n: Int): Runnable = new Runnable {
  def run(): Unit =
    println(s"Runnable ${n}")
}

val runnables = 1.to(4).map(createRunnable)
```

```scala
runnables.foreach(fixedPool.submit)
// Runnable 1
// Runnable 2
// Runnable 3
// Runnable 4
```

---
# Executor and Runnable

```scala mdoc:reset:silent
import java.util.concurrent.Executors

val fixedPool = Executors.newFixedThreadPool(2)

def createRunnable(n: Int): Runnable =
  () => println(s"Runnable ${n}")

val runnables = 1.to(4).map(createRunnable)
```

```scala
runnables.foreach(fixedPool.submit)
// Runnable 1
// Runnable 2
// Runnable 3
// Runnable 4
```

---
# Executor and Runnable

```scala mdoc:reset:silent
import java.util.concurrent.Executors

val fixedPool = Executors.newFixedThreadPool(2)

def createRunnable(n: Int): Runnable =
  () =>
    println(s"[${Thread.currentThread.getName}] Runnable ${n}")

val runnables = 1.to(4).map(createRunnable)
```

```scala
runnables.foreach(fixedPool.submit)
// [pool-19-thread-1] Runnable 1
// [pool-19-thread-2] Runnable 2
// [pool-19-thread-1] Runnable 3
// [pool-19-thread-2] Runnable 4
```

---
# ExecutionContext and Future

```scala
import java.util.concurrent.Executors
import scala.concurrent.{ ExecutionContext, Future }

val fixedPool        = Executors.newFixedThreadPool(2)
val executionContext = ExecutionContext.fromExecutor(fixedPool)
```

```scala
val future = Future { 1 }(executionContext)
```

---
# ExecutionContext and Future

```scala
import java.util.concurrent.Executors
import scala.concurrent.duration.Duration
import scala.concurrent.{ Await, ExecutionContext, Future }

val fixedPool        = Executors.newFixedThreadPool(2)
val executionContext = ExecutionContext.fromExecutor(fixedPool)
```

```scala
val future = Future {
  Thread.sleep(1000)  // sleep 1 second
  1
}(executionContext)
// future: Future[Int] = Future(<not completed>)
```

--

```scala
Await.result(future, Duration.Inf)
// res: Int = 1
```

---
# ExecutionContext and Future

```scala
import java.util.concurrent.Executors
import scala.concurrent.{ ExecutionContext, Future }

val fixedPool = Executors.newFixedThreadPool(2)
val ec        = ExecutionContext.fromExecutor(fixedPool)

def createFuture(n: Int, executionContext: ExecutionContext): Future[Unit] =
  Future {
    println(s"[${Thread.currentThread.getName}] Runnable ${n}")
  }(executionContext)
```

```scala
1.to(4).foreach(createFuture(_, ec))
// [pool-19-thread-1] Runnable 1
// [pool-19-thread-2] Runnable 2
// [pool-19-thread-1] Runnable 3
// [pool-19-thread-2] Runnable 4
```

---
# ExecutionContext

.fifty-two-left[
```scala
import java.util.concurrent.Executors
import scala.concurrent.ExecutionContext

val pool = Executors.newFixedThreadPool(2)
val ec   = ExecutionContext.fromExecutor(pool)
```
]

.forty-two-right[
<img src="img/foundation/execution-context.svg" alt="ExecutionContext" style="width:420px;"/>
]


</textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>
    var slideshow = remark.create({
        ratio: "16:9",
        slideNumberFormat: ''
    });
</script>
</body>
</html>